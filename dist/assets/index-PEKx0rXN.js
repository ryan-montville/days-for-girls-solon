(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();function B(e,r,n,a,t){const o=document.createElement("button");o.setAttribute("type",r),o.setAttribute("id",n),o.setAttribute("class",a);{const c=document.createElement("span");c.setAttribute("class","material-symbols-outlined");const s=document.createTextNode(t);c.appendChild(s),o.appendChild(c)}const l=document.createTextNode(e);return o.appendChild(l),o}function d(e){const r=document.getElementById(e),n=r.getElementsByClassName("modal");n&&n[0].setAttribute("aria-modal","false"),r.style.display="none"}function p(e,r,n){const a=document.getElementById(r);a.innerHTML="";const t=document.createElement("div");n==="check_circle"?(t.setAttribute("class","success message"),t.setAttribute("aria-live","polite"),console.log(e)):n==="error"?(t.setAttribute("class","error message"),t.setAttribute("role","alert"),console.error(e)):n==="delete"||n==="warn"?(t.setAttribute("class","warn message"),t.setAttribute("aria-live","polite"),console.warn(e)):(t.setAttribute("class","info message"),t.setAttribute("aria-live","polite"),console.log(e));const o=document.createElement("span");o.setAttribute("class","material-symbols-outlined");const l=document.createTextNode(n);o.appendChild(l),t.appendChild(o);const c=document.createTextNode(e);t.appendChild(c);const s=B("","button","closeButton","","close");s.addEventListener("click",()=>a.innerHTML=""),t.appendChild(s),a.appendChild(t)}function k(e,r){const n=e.querySelectorAll("button, [href], input, select, textarea");if(r.style.display==="none")return;if(!n.length){console.warn("trapFocus Function called on modal with no focusable elements");return}const a=n[0],t=n[n.length-1];document.addEventListener("keydown",o=>{o.key==="Tab"&&(o.shiftKey?document.activeElement===a&&(t.focus(),o.preventDefault()):document.activeElement===t&&(a.focus(),o.preventDefault()))})}function g(e,r){const n=JSON.stringify(r);localStorage.setItem(e,n)}const E=document.getElementById("page-wrapper");let y=document.getElementById("mobile-nav-toggle");const f="https://raw.githubusercontent.com/ryan-montville/days-for-girls-solon/refs/heads/main/";async function L(e,r){await new Promise(s=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>s(),{once:!0}):s()}),await w(e),await x(),await A();const n=document.querySelector("nav"),a=document.getElementById("open-sign-in-modal-button"),t=document.getElementById("sign-out-button"),o=document.getElementById("sign-in-backdrop"),l=document.getElementById("sign-in-modal"),c=document.getElementById("close-modal-button");M(),C(),y.addEventListener("click",()=>{console.log("toggling nav menu"),n.classList.toggle("open"),n.classList.contains("open")?y.innerText="close":y.innerText="menu"}),a.addEventListener("click",s=>{s.preventDefault(),n.classList.contains("open")&&(y.innerText="menu",n.classList.remove("open")),o.style.display="flex",l.classList.add("opening"),l.setAttribute("aria-modal","true");const i=document.getElementById("username");i&&i.focus(),k(l,o)}),l.addEventListener("submit",s=>{s.preventDefault();const i=new FormData(l),u=i.get("username"),m=i.get("password");if(u===null||u?.toString().trim()===""){p("Username must not be empty","sign-in-message","error");return}(m===null||m.toString().trim()==="")&&p("PAssword must not be empty","sign-in-message","error"),localStorage.setItem("username",u?.toString()),o.style.display="none",p("Sign In Successful","main-message","check_circle"),I()}),t.addEventListener("click",()=>{T()}),c.addEventListener("click",s=>{s.preventDefault(),d("sign-in-backdrop")}),document.addEventListener("keydown",s=>{let i=document.getElementById("delete-item-backdrop"),u=document.getElementById("sign-in-backdrop"),m=document.getElementById("edit-event-backdrop"),v=document.getElementById("add-inventory-backdrop"),h=document.getElementById("distribute-inventory-backdrop"),b=document.getElementById("manage-inventory-backdrop");s.key==="Escape"&&(s.preventDefault(),i&&i.style.display==="flex"?d("delete-item-backdrop"):u&&u.style.display==="flex"?d("sign-in-backdrop"):m&&m.style.display==="flex"?d("edit-event-backdrop"):v&&v.style.display==="flex"?d("add-inventory-backdrop"):h&&h.style.display==="flex"?d("distribute-inventory-backdrop"):b&&b.style.display==="flex"?d("manage-inventory-backdrop"):console.log("No modals are open"))})}function S(){fetch("src/inventory.json").then(e=>e.json()).then(e=>{g("currentInventory",e.currentInventory),g("donatedInventory",e.donatedInventory),g("distributedInventory",e.distributedInventory)}).catch(e=>{p("Error loading inventory data. Please try reloading the page","main-message","error"),console.error(`Error loading inventory data: ${e}`)}),fetch("src/events.json").then(e=>e.json()).then(e=>{g("events",e.upcomingEvents),g("SignUpEntries",e.SignUpEntries)}).catch(e=>{p("Error loading events data. Please try reloading the page","main-message","error"),console.error(`Error loading events data: ${e}`)})}async function w(e,r){const n=document.getElementById("header-placeholder");try{const a=await fetch(f+"header.html");if(!a.ok)throw console.error(`${a.status}: ${a.statusText}`),new Error("Error fetching header");const t=await a.text();let o=document.createElement("header");o.innerHTML=t,E.replaceChild(o,n),document.querySelector("nav").querySelectorAll("a").forEach(s=>{s.textContent===e&&s.setAttribute("aria-current","page")})}catch(a){console.error(`Failed to load the header: ${a}`)}}async function x(){const e=document.getElementById("footer-placeholder");try{const r=await fetch(f+"footer.html");if(!r.ok)throw console.error(`${r.status}: ${r.statusText}`),new Error("Error fetching footer");const n=await r.text(),a=document.createElement("footer");a.innerHTML=n,E.replaceChild(a,e)}catch(r){console.error(`Failed to load the footer: ${r}`)}}async function A(){const e=document.querySelector("body"),r=document.getElementById("modal-placeholder");try{const n=await fetch(f+"modal.html");if(!n.ok)throw console.error(`${n.status}: ${n.statusText}`),new Error("Error fetching modals");const a=await n.text(),t=document.createElement("div");t.innerHTML=a,e.replaceChild(t,r)}catch(n){console.error(`Failed to load the modals: ${n}`)}}function M(){localStorage.getItem("currentInventory")||S()}function I(){const e=document.getElementById("inventory-link"),r=document.getElementById("open-sign-in-modal-button"),n=document.getElementById("sign-out-button");e.style.display="block",r.style.display="none",n.style.display="block",console.log("Found username in local storage. Sign in successful")}function T(){const e=document.getElementById("inventory-link"),r=document.getElementById("open-sign-in-modal-button"),n=document.getElementById("sign-out-button");console.log("Removing username from local storage"),localStorage.removeItem("username"),e.style.display="none",n.style.display="none",r.style.display="block"}function C(){const e=document.getElementById("inventory-link");localStorage.getItem("username")?I():e.style.display="none"}L("Home");
