import{a,A as b,i as L,m as C,J as k,d as c,K as S,k as w,o as N,r as A,t as x,L as P,l as H,M}from"./app-DZzLD5eE.js";const p=document.getElementById("sign-up-entires-card"),R=document.getElementById("deleteEventCard"),F=document.getElementById("delete-button"),U=window.location.search,$=new URLSearchParams(U),f=$.get("id");let m=0;if(f){const e=parseInt(f,10);isNaN(e)?a("Could not find event","main-message","error"):m=e}else a("Could not find event","main-message","error");const l=b(m),T=document.getElementById("edit-event-backdrop"),s=document.getElementById("edit-event-modal");function D(e){const t=document.getElementById("event-info");t.innerHTML="";const n=document.createElement("h2"),o=document.createTextNode(e.eventTitle);n.appendChild(o),t.appendChild(n);const i=document.createElement("h3"),d=document.createTextNode(`${N(e.eventDate.toString(),"longDate")} ${e.eventTime}`);i.appendChild(d),t.appendChild(i);const r=document.createElement("h3"),u=document.createTextNode(e.eventLocation);r.appendChild(u),t.appendChild(r);const g=document.createElement("h3"),I=document.createTextNode(`Number Attending: ${e.numberAttending}`);g.appendChild(I),t.appendChild(g);const E=document.createElement("p"),B=document.createTextNode(e.eventDescription);E.appendChild(B),t.appendChild(E);const v=document.createElement("section");v.setAttribute("class","form-row");const h=A("Edit Event Info","button","editButton","primary","edit_calendar");h.addEventListener("click",()=>{T.style.display="flex",s.setAttribute("aria-modal","true"),document.getElementById("eventTitle").focus(),x(s,T)}),v.appendChild(h),t.appendChild(v)}function y(e){let t=document.getElementById("eventTitle");t.value=e.eventTitle;let n=document.getElementById("eventDate"),o=new Date(e.eventDate);n.value=o.toISOString().split("T")[0];let i=document.getElementById("eventLocation");i.value=e.eventLocation;let d=document.getElementById("eventTime");d.value=e.eventTime;let r=document.getElementById("eventDescription");r.value=e.eventDescription}function V(){let e=new FormData(s),t={eventId:m,eventTitle:"",eventDate:new Date,eventLocation:"",eventTime:"",eventDescription:"",numberAttending:0},n=e.get("eventTitle");if(n===null||n.toString().trim()===""){a("Please enter the title of the event","edit-event-modal-message","error");return}else t.eventTitle=n.toString();const o=e.get("eventDate");if(o===null||o===""){a("Please enter the date of the event","edit-event-modal-message","error");return}else t.eventDate=new Date(o.toString());let i=e.get("eventLocation");if(i===null||i.toString().trim()===""){a("Please enter the location of the event","edit-event-modal-message","error");return}else t.eventLocation=i.toString();let d=e.get("eventTime");if(d===null||d.toString().trim()===""){a("Please enter the time of the event","edit-event-modal-message","error");return}else t.eventTime=d.toString();let r=e.get("eventDescription");if(r===null||r.toString().trim()===""){a("Please enter a description for the event","edit-event-modal-message","error");return}else t.eventDescription=r.toString();P(t),D(t),c("edit-event-backdrop"),a("The event was successfully updated","main-message","check_circle")}function q(e){const t=H(e,4),n=t.querySelector("button");return n&&n.addEventListener("click",()=>{const o=C(e,"Are you sure you want to delete this entry?");if(o){const i=o.children[0],d=o.children[1];d&&d.addEventListener("click",()=>{M(e.entryId),c("delete-item-backdrop"),a(`Deleted entry from ${e.fullName}`,"main-message","delete"),t.remove()}),i&&i.addEventListener("click",()=>{c("delete-item-backdrop")})}}),t}function _(e){let t=S(m);if(t.length===0){let n=document.createElement("p"),o=document.createTextNode(`No one has signed up for ${e.eventTitle} yet`);n.appendChild(o),p.appendChild(n)}else{const o=w("sign-up-table",["Name","Email","Comments","Delete"]);let i=t.reduce((d,r)=>{const u=q(r);return d.appendChild(u),d},document.createElement("tbody"));o.appendChild(i),p.appendChild(o)}}L("Upcoming Events");if(l===null){a("Could not find event","main-message","error"),s.remove(),p.remove(),R.remove();let e=document.createElement("section");e.setAttribute("class","card");let t=document.createElement("h2"),n=document.createTextNode("Could not find event");t.appendChild(n),e.appendChild(t);let o=document.createElement("p"),i=document.createTextNode("The event you were looking for does not exist or the url is incorrect. Please go back to the events page and try again.");o.appendChild(i),e.appendChild(o);let d=document.querySelector("main");d&&d.appendChild(e)}else y(l),_(l),D(l),F.addEventListener("click",()=>{const n=C(l,"Are you sure you want to delete this event?");if(n){const o=n.children[0],i=n.children[1];i&&i.addEventListener("click",()=>{k(m),c("delete-item-backdrop"),a(`Deleted event ${l.eventTitle} ${l.eventDate}`,"main-message","delete")}),o&&o.addEventListener("click",()=>{c("delete-item-backdrop")})}}),document.getElementById("reset").addEventListener("click",n=>{n.preventDefault(),y(l)}),document.getElementById("cancel").addEventListener("click",()=>{c("edit-event-backdrop")}),s.addEventListener("submit",n=>{n.preventDefault(),V()});
