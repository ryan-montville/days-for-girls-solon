import{D as L,e as l,i as k,o as y,L as S,f as c,M as w,m as N,r as A,v as x,t as P,T as h,N as H,n as M,O as R}from"./app-BOYs2vfY.js";const p=document.getElementById("sign-up-entires-card"),F=document.getElementById("deleteEventCard"),U=document.getElementById("delete-button"),$=new URLSearchParams(window.location.search),T=$.get("id"),s=T?parseInt(T):0,V=s===0||isNaN(s),r=L(s);(V||r===null)&&l("Could not find event","main-message","error");const D=document.getElementById("edit-event-backdrop"),u=document.getElementById("edit-event-modal");function C(e){const t=document.getElementById("event-info");t.innerHTML="";const n=document.createElement("h2"),o=document.createTextNode(e.eventTitle);n.appendChild(o),t.appendChild(n);const i=document.createElement("h3"),d=document.createTextNode(`${A(e.eventDate.toString(),"longDate")} ${e.eventTime}`);i.appendChild(d),t.appendChild(i);const a=document.createElement("h3"),m=document.createTextNode(e.eventLocation);a.appendChild(m),t.appendChild(a);const g=document.createElement("h3"),B=document.createTextNode(`Number Attending: ${e.numberAttending}`);g.appendChild(B),t.appendChild(g);const E=document.createElement("p"),b=document.createTextNode(e.eventDescription);E.appendChild(b),t.appendChild(E);const v=document.createElement("section");v.setAttribute("class","form-row");const f=x("Edit Event Info","button","editButton","primary","edit_calendar");f.addEventListener("click",()=>{D.style.display="flex",u.setAttribute("aria-modal","true"),document.getElementById("eventTitle").focus(),P(u,D)}),v.appendChild(f),t.appendChild(v)}function I(e){let t=document.getElementById("eventTitle");t.value=e.eventTitle;let n=document.getElementById("eventDate"),o=e.eventDate.toDate();n.value=o.toISOString().split("T")[0];let i=document.getElementById("eventLocation");i.value=e.eventLocation;let d=document.getElementById("eventTime");d.value=e.eventTime;let a=document.getElementById("eventDescription");a.value=e.eventDescription}function q(){let e=new FormData(u),t={eventId:s,eventTitle:"",eventDate:h.fromDate(new Date(0)),eventLocation:"",eventTime:"",eventDescription:"",numberAttending:0},n=e.get("eventTitle");if(n===null||n.toString().trim()===""){l("Please enter the title of the event","edit-event-modal-message","error");return}else t.eventTitle=n.toString();const o=e.get("eventDate");if(o===null||o===""){l("Please enter the date of the event","edit-event-modal-message","error");return}else{const m=new Date(o.toString());t.eventDate=h.fromDate(m)}let i=e.get("eventLocation");if(i===null||i.toString().trim()===""){l("Please enter the location of the event","edit-event-modal-message","error");return}else t.eventLocation=i.toString();let d=e.get("eventTime");if(d===null||d.toString().trim()===""){l("Please enter the time of the event","edit-event-modal-message","error");return}else t.eventTime=d.toString();let a=e.get("eventDescription");if(a===null||a.toString().trim()===""){l("Please enter a description for the event","edit-event-modal-message","error");return}else t.eventDescription=a.toString();H(t),C(t),c("edit-event-backdrop"),l("The event was successfully updated","main-message","check_circle")}function _(e){const t=M(e,4),n=t.querySelector("button");return n&&n.addEventListener("click",()=>{const o=y(e,"Are you sure you want to delete this entry?");if(o){const i=o.children[0],d=o.children[1];d&&d.addEventListener("click",()=>{R(e.entryId),c("delete-item-backdrop"),l(`Deleted entry from ${e.fullName}`,"main-message","delete"),t.remove()}),i&&i.addEventListener("click",()=>{c("delete-item-backdrop")})}}),t}function z(e){let t=w(s);if(t.length===0){let n=document.createElement("p"),o=document.createTextNode(`No one has signed up for ${e.eventTitle} yet`);n.appendChild(o),p.appendChild(n)}else{const o=N("sign-up-table",["Name","Email","Comments","Delete"]);let i=t.reduce((d,a)=>{const m=_(a);return d.appendChild(m),d},document.createElement("tbody"));o.appendChild(i),p.appendChild(o)}}k("Upcoming Events");if(r===null){l("Could not find event","main-message","error"),u.remove(),p.remove(),F.remove();let e=document.createElement("section");e.setAttribute("class","card");let t=document.createElement("h2"),n=document.createTextNode("Could not find event");t.appendChild(n),e.appendChild(t);let o=document.createElement("p"),i=document.createTextNode("The event you were looking for does not exist or the url is incorrect. Please go back to the events page and try again.");o.appendChild(i),e.appendChild(o);let d=document.querySelector("main");d&&d.appendChild(e)}else I(r),z(r),C(r),U.addEventListener("click",()=>{const n=y(r,"Are you sure you want to delete this event?");if(n){const o=n.children[0],i=n.children[1];i&&i.addEventListener("click",()=>{S(s),c("delete-item-backdrop"),l(`Deleted event ${r.eventTitle} ${r.eventDate}`,"main-message","delete")}),o&&o.addEventListener("click",()=>{c("delete-item-backdrop")})}}),document.getElementById("reset").addEventListener("click",n=>{n.preventDefault(),I(r)}),document.getElementById("cancel").addEventListener("click",()=>{c("edit-event-backdrop")}),u.addEventListener("submit",n=>{n.preventDefault(),q()});
