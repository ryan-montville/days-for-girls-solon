import{t as r,s as c}from"./app-CWWncusU.js";async function g(t){try{let e=r.events;if(t){const n=new Date;n.setHours(0,0,0,0),e=r.events.where("eventDate").aboveOrEqual(n)}else e=r.events.orderBy("eventDate");return await e.reverse().toArray()}catch(e){throw console.error("Error fetching events from IndexedDB:",e),e}}async function o(t){const e=await r.events.get(t);if(!e)throw new Error("404 - Event not found");return e}async function y(t){try{return await r.events.add(t)}catch(e){throw console.error("Error adding event to IndexedDB:",e),new Error("Error adding event. Please try reloading the page.")}}async function a(t,e){try{const{eventId:n,...s}=e;if(await r.events.update(t,s)===0)throw new Error(`Event with ID ${t} not found.`)}catch(n){throw console.error("Error updating event in IndexedDB:",n),new Error("Error updating event. Please try reloading the page.")}}async function w(t){try{await r.transaction("rw",r.events,r.signUpEntries,async()=>{await r.events.delete(t),await r.signUpEntries.where("eventId").equals(t).delete()})}catch(e){throw console.error("Error deleting event from IndexedDB:",e),new Error("Could not delete the event. Please try reloading the page.")}}async function u(t){try{const e=await r.signUpEntries.add(t);let n=await o(t.eventId);return n.numberAttending+=1,await a(t.eventId,n),e}catch(e){throw console.error("Error adding sign up entry to IndexedDB:",e),new Error("Error signing up for event. Please try reloading the page.")}}async function E(t){return await r.signUpEntries.where("eventId").equals(t).toArray()}async function h(t){try{const e=await r.signUpEntries.get(t);if(e){let n=await o(e.eventId);n.numberAttending-=1,await a(e.eventId,n),await r.signUpEntries.delete(t)}}catch(e){throw console.error("Error deleting sign up entry from IndexedDB:",e),new Error("Could not delete sign up entry. Please try reloading the page.")}}async function p(){return await r.donatePage.get(1)||null}async function m(t){try{await r.donatePage.put({...t,contentId:1})}catch(e){throw console.error("Error adding donate page content:",e),new Error("Error adding page content.")}}async function f(t){try{await r.donatePage.update(1,t)}catch(e){throw console.error("Error updating donate page content:",e),new Error("Error updating page content.")}}async function v(){return await r.locations.toArray()}async function I(t){try{return await r.locations.add(t)}catch(e){throw console.error("Error adding location to IndexedDB:",e),new Error("Error adding location. Please try reloading the page.")}}async function D(t){try{await r.transaction("rw",r.locations,r.locationItems,async()=>{await r.locations.delete(t),await r.locationItems.where("locationId").equals(t).delete()})}catch(e){throw console.error("Error deleting location:",e),new Error("Error deleting location. Please try reloading the page.")}}async function P(){return await r.components.toArray()}async function A(t){try{return await r.components.add(t)}catch(e){throw console.error("Error adding component type to IndexedDB:",e),new Error("Error adding component type. Please try reloading the page.")}}async function q(t){try{await r.transaction("rw",r.components,r.locationItems,async()=>{await r.components.delete(t),await r.locationItems.where("componentId").equals(t).delete()})}catch(e){throw console.error("Error deleting component type:",e),new Error("Error deleting component type. Please try reloading the page.")}}async function L(){return await r.locationItems.toArray()}async function U(t){return await r.locationItems.where("locationId").equals(t).toArray()}async function i(t,e){try{return await r.locationItems.where("[locationId+componentId]").equals([t,e]).first()||null}catch(n){throw console.error("Error fetching location item:",n),new Error("Error fetching item")}}async function B(t){try{return await r.locationItems.add(t)}catch(e){throw console.error("Error adding items to location:",e),new Error("Error adding items to location. Please try reloading the page.")}}async function x(t){try{let e=await i(t.locationId,t.componentId);if(e)e.quantity=t.quantity,await r.locationItems.update(e.itemId,e);else throw new Error("Item not found at this location")}catch(e){throw console.error("Error updating item quantity:",e),new Error("Error updating item quantity. Please try reloading the page.")}}async function b(t,e){try{const n=await i(t,e);if(n)await r.locationItems.delete(n.itemId);else throw new Error("Item not at location")}catch(n){throw console.error("Error deleting item from location:",n),new Error("Error deleting item from location. Please try reloading the page.")}}async function C(){return await r.inventoryEntries.toArray()}async function T(t){try{return await r.inventoryEntries.add(t)}catch(e){throw console.error("Error logging inventory entry:",e),new Error("Error logging inventory entry. Please try reloading the page.")}}async function F(t){try{await r.inventoryEntries.delete(t)}catch(e){throw console.error("Error deleting inventory log entry:",e),new Error("Error deleting inventory log entry. Please try reloading the page.")}}async function O(){try{await r.delete(),c("Database reset successful","main-message","delete"),window.location.reload(),console.log("Database deleted successfully.")}catch(t){console.error("Could not delete database:",t)}}export{h as A,y as a,m as b,o as c,O as d,u as e,g as f,p as g,L as h,v as i,P as j,D as k,q as l,C as m,A as n,I as o,U as p,x as q,T as r,B as s,b as t,f as u,F as v,i as w,E as x,w as y,a as z};
