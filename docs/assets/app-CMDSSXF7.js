(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function l(e,t){const n=JSON.stringify(t);localStorage.setItem(e,n)}function i(e){const t=localStorage.getItem(e);return JSON.parse(t)}function _(){return i("events").sort((t,n)=>{const o=new Date(t.eventDate).getTime(),r=new Date(n.eventDate).getTime();return o-r})}function G(e){const n=i("events").find(o=>o.eventId===e);return n||null}function Q(e){let t=i("events");t.push(e),l("events",t)}function Y(e){let t=i("events"),n=t.findIndex(o=>o.eventId===e.eventId);t[n]=e,l("events",t)}function w(e,t){let n=i("events");const o=n.findIndex(r=>r.eventId===e);t==="delete"?n[o].numberAttending-=1:n[o].numberAttending+=1,l("events",n)}function Z(e){const n=i("SignUpEntries").filter(s=>s.eventId!==e);l("SignUpEntries",n);const r=i("events").filter(s=>s.eventId!==e);l("events",r)}function X(){let e=i("events");return e.length===0?1:e[e.length-1].eventId+1}function ee(e){return i("SignUpEntries").filter(n=>n.eventId===e)}function A(e){const n=i("SignUpEntries").find(o=>o.entryId===e);return n||null}function te(e){let t=i("SignUpEntries");t.push(e),l("SignUpEntries",t),w(e.eventId,"newSignUp")}function ne(e){let n=i("SignUpEntries").filter(r=>r.entryId!==e);const o=A(e);o&&w(o.eventId,"delete"),l("SignUpEntries",n)}function oe(){const e=i("SignUpEntries");return e.length===0?1:e[e.length-1].entryId+1}function U(){return i("distributedInventory")}function M(e){const n=i("distributedInventory").find(o=>o.entryId===e);return n||null}function re(e){let t=i("distributedInventory");t.push(e),l("distributedInventory",t),L(e.componentType,"subtract",e.quantity)}function se(e){const n=i("distributedInventory").filter(r=>r.entryId!==e),o=M(e);o&&L(o.componentType,"add",o.quantity),l("distributedInventory",n)}function ae(){const e=i("distributedInventory");return e.length===0?1:e[e.length-1].entryId+1}function ie(e,t){S();const n=C({componentType:e});return n?n.quantity<t?{hasEnough:!1,quantity:n.quantity}:{hasEnough:!0,quantity:n.quantity}:{hasEnough:!1,quantity:0}}function O(){return i("donatedInventory")}function P(e){const n=i("donatedInventory").find(o=>o.entryId===e);return n||null}function de(e){let t=i("donatedInventory");t.push(e),l("donatedInventory",t),L(e.componentType,"add",e.quantity)}function ce(e){const n=i("donatedInventory").filter(r=>r.entryId!==e),o=P(e);o&&L(o.componentType,"subtract",o.quantity),l("donatedInventory",n)}function le(){const e=i("donatedInventory");return e.length===0?1:e[e.length-1].entryId+1}function S(){return i("currentInventory")}function ue(e){let t=i("currentInventory");t.push(e),l("currentInventory",t)}function C({componentId:e,componentType:t}){const n=i("currentInventory");if(e){let o=n.find(r=>r.componentId===e);if(o)return o}else{let o=n.find(r=>r.componentType===t);if(o)return o}return null}function me(e){const t=C({componentId:e});if(t){let n=U(),o=O(),r=S();const s=n.filter(a=>a.componentType!==t.componentType),d=o.filter(a=>a.componentType!==t.componentType),u=r.filter(a=>a.componentId!==e);l("donatedInventory",d),l("distributedInventory",s),l("currentInventory",u)}}function L(e,t,n){let o=i("currentInventory");const r=o.findIndex(s=>s.componentType===e);t==="add"?o[r].quantity+=n:o[r].quantity-=n,l("currentInventory",o)}function pe(){const e=i("currentInventory");return e.length===0?1:e[e.length-1].componentId+1}function ge(){const e=localStorage.getItem("donatePage");return JSON.parse(e)}function ye(e){l("donatePage",e)}function b(e,t,n,o,r){const s=document.createElement("button");if(s.setAttribute("type",t),s.setAttribute("id",n),s.setAttribute("class",o),r){const u=document.createElement("span");u.setAttribute("class","material-symbols-outlined");const a=document.createTextNode(r);u.appendChild(a),s.appendChild(u)}const d=document.createTextNode(e);return s.appendChild(d),s}function fe(e,t,n,o){const r=Object.keys(e),s=Object.values(e),d=s.length,u=r.filter(c=>c.includes("Id")).length;let a=document.createElement("tr");if(d===0){const c=document.createElement("td");c.setAttribute("colspan",t.toString());const m=document.createTextNode("No items to display");c.appendChild(m),a.appendChild(c)}else{for(let p=u;p<d;p++){const y=document.createElement("td");if(r[p]==="entryDate"){if(o){const g=$(s[p],o),f=document.createTextNode(g);y.appendChild(f)}}else{const g=document.createTextNode(s[p]);y.appendChild(g)}a.appendChild(y)}const c=document.createElement("td"),m=b("","button",s[0],"delete-button-icon","delete");c.appendChild(m),a.appendChild(c)}return a}function ve(){const e=document.getElementsByClassName("message-wrapper");for(const t of e)t.innerHTML=""}function F(e,t,n){const o={message:e,messageContainer:t,icon:n};sessionStorage.setItem("message",JSON.stringify(o))}function q(){const e=sessionStorage.getItem("message");if(e){const t=JSON.parse(e);h(t.message,t.messageContainer,t.icon),sessionStorage.removeItem("message")}}function v(e){const t=document.getElementById(e),n=t.getElementsByClassName("modal");n&&n[0].setAttribute("aria-modal","false"),t.style.display="none"}function h(e,t,n){const o=document.getElementById(t);o.innerHTML="";const r=document.createElement("div");n==="check_circle"?(r.setAttribute("class","success message"),r.setAttribute("aria-live","polite"),console.log(e)):n==="error"?(r.setAttribute("class","error message"),r.setAttribute("role","alert"),console.error(e)):n==="delete"||n==="warn"?(r.setAttribute("class","warn message"),r.setAttribute("aria-live","polite"),console.warn(e)):(r.setAttribute("class","info message"),r.setAttribute("aria-live","polite"),console.log(e));const s=document.createElement("span");s.setAttribute("class","material-symbols-outlined");const d=document.createTextNode(n);s.appendChild(d),r.appendChild(s);const u=document.createTextNode(e);r.appendChild(u);const a=b("","button","closeButton","","close");a.addEventListener("click",()=>o.innerHTML=""),r.appendChild(a),o.appendChild(r)}function Ie(e,t){const n=document.createElement("table");n.setAttribute("id",e);const o=document.createElement("thead");return t.forEach(r=>{const s=document.createElement("th"),d=document.createTextNode(r);s.appendChild(d),o.appendChild(s)}),n.appendChild(o),n}function he(e,t){const n=document.getElementById("delete-item-backdrop"),o=document.getElementById("delete-item-modal");n.style.display="flex",o.setAttribute("aria-modal","true");const r=document.getElementById("delete-item-modal");r.innerHTML="";const s=document.createElement("h2"),d=document.createTextNode(t);s.appendChild(d),r.appendChild(s);const u=Object.keys(e),a=Object.values(e),c=a.length;for(let g=0;g<c;g++){const f=document.createElement("p");if(!u[g].includes("Id")&&!u[g].includes("eventDescription")){const D=u[g].replace(/([a-z])([A-Z])/g,"$1 $2"),N=document.createTextNode(`${D.toLowerCase()}: ${a[g]}`);f.appendChild(N),r.appendChild(f)}}const m=document.createElement("section");m.setAttribute("class","button-row");const p=b("No","button","no","secondary");m.appendChild(p);const y=b("Yes","button","yes","delete-button");return m.appendChild(y),r.appendChild(m),p.focus(),B(r,n),m}function $(e,t){const n=new Date(e),o=new Date(n.getTime()-n.getTimezoneOffset()*-6e4);return t==="shortDate"?o.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):o.toLocaleDateString("en-US",{month:"long",day:"2-digit",year:"numeric"})}function H(){const e=S();let t=[];return e.forEach(n=>t.push(n.componentType)),t}function Ee(){const e=document.createElement("div"),t=document.createElement("p"),n=document.createTextNode("Loading...");return t.appendChild(n),e.appendChild(t),e}function be(e){let t=document.getElementById(e);t.options.length===1&&H().forEach(o=>{let r=document.createElement("option");r.setAttribute("value",o);let s=document.createTextNode(o);r.appendChild(s),t.appendChild(r)})}function B(e,t){const n=e.querySelectorAll("button, [href], input, select, textarea");if(t.style.display==="none")return;if(!n.length){console.warn("trapFocus Function called on modal with no focusable elements");return}const o=n[0],r=n[n.length-1];document.addEventListener("keydown",s=>{s.key==="Tab"&&(s.shiftKey?document.activeElement===o&&(r.focus(),s.preventDefault()):document.activeElement===r&&(o.focus(),s.preventDefault()))})}function I(e,t){const n=JSON.stringify(t);localStorage.setItem(e,n)}const k=document.getElementById("page-wrapper");let E=document.getElementById("mobile-nav-toggle");const T="https://raw.githubusercontent.com/ryan-montville/days-for-girls-solon/refs/heads/main/";async function Le(e,t){await new Promise(a=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>a(),{once:!0}):a()}),await J(e),await K(),await z();const n=document.querySelector("nav"),o=document.getElementById("open-sign-in-modal-button"),r=document.getElementById("sign-out-button"),s=document.getElementById("sign-in-backdrop"),d=document.getElementById("sign-in-modal"),u=document.getElementById("close-modal-button");await R(),W(),q(),E.addEventListener("click",()=>{console.log("toggling nav menu"),n.classList.toggle("open"),n.classList.contains("open")?E.innerText="close":E.innerText="menu"}),o.addEventListener("click",a=>{a.preventDefault(),n.classList.contains("open")&&(E.innerText="menu",n.classList.remove("open")),s.style.display="flex",d.classList.add("opening"),d.setAttribute("aria-modal","true");const c=document.getElementById("username");c&&c.focus(),B(d,s)}),d.addEventListener("submit",a=>{a.preventDefault();const c=new FormData(d),m=c.get("username"),p=c.get("password");if(m===null||m?.toString().trim()===""){h("Username must not be empty","sign-in-message","error");return}(p===null||p.toString().trim()==="")&&h("PAssword must not be empty","sign-in-message","error"),localStorage.setItem("username",m?.toString()),s.style.display="none",x(),F("Sign In Successful","main-message","check_circle"),window.location.reload()}),r.addEventListener("click",()=>{V()}),u.addEventListener("click",a=>{a.preventDefault(),v("sign-in-backdrop")}),document.addEventListener("keydown",a=>{let c=document.getElementById("delete-item-backdrop"),m=document.getElementById("sign-in-backdrop"),p=document.getElementById("edit-event-backdrop"),y=document.getElementById("add-inventory-backdrop"),g=document.getElementById("distribute-inventory-backdrop"),f=document.getElementById("manage-inventory-backdrop");a.key==="Escape"&&(a.preventDefault(),c&&c.style.display==="flex"?v("delete-item-backdrop"):m&&m.style.display==="flex"?v("sign-in-backdrop"):p&&p.style.display==="flex"?v("edit-event-backdrop"):y&&y.style.display==="flex"?v("add-inventory-backdrop"):g&&g.style.display==="flex"?v("distribute-inventory-backdrop"):f&&f.style.display==="flex"?v("manage-inventory-backdrop"):console.log("No modals are open"))})}function Se(){return!!localStorage.getItem("username")}async function j(){await Promise.all([fetch("https://raw.githubusercontent.com/ryan-montville/days-for-girls-solon/refs/heads/main/src/inventory.json").then(e=>e.json()).then(e=>{I("currentInventory",e.currentInventory),I("donatedInventory",e.donatedInventory),I("distributedInventory",e.distributedInventory)}).catch(e=>{h("Error loading inventory data. Please try reloading the page","main-message","error"),console.error(`Error loading inventory data: ${e}`)}),fetch("https://raw.githubusercontent.com/ryan-montville/days-for-girls-solon/refs/heads/main/src/events.json").then(e=>e.json()).then(e=>{I("events",e.upcomingEvents),I("SignUpEntries",e.SignUpEntries)}).catch(e=>{h("Error loading events data. Please try reloading the page","main-message","error"),console.error(`Error loading events data: ${e}`)})])}async function J(e,t){const n=document.getElementById("header-placeholder");try{const o=await fetch(T+"header.html");if(!o.ok)throw console.error(`${o.status}: ${o.statusText}`),new Error("Error fetching header");const r=await o.text();let s=document.createElement("header");s.innerHTML=r,k.replaceChild(s,n),document.querySelector("nav").querySelectorAll("a").forEach(a=>{a.textContent===e&&a.setAttribute("aria-current","page")})}catch(o){console.error(`Failed to load the header: ${o}`)}}async function K(){const e=document.getElementById("footer-placeholder");try{const t=await fetch(T+"footer.html");if(!t.ok)throw console.error(`${t.status}: ${t.statusText}`),new Error("Error fetching footer");const n=await t.text(),o=document.createElement("footer");o.innerHTML=n,k.replaceChild(o,e)}catch(t){console.error(`Failed to load the footer: ${t}`)}}async function z(){const e=document.querySelector("body"),t=document.getElementById("modal-placeholder");try{const n=await fetch(T+"modal.html");if(!n.ok)throw console.error(`${n.status}: ${n.statusText}`),new Error("Error fetching modals");const o=await n.text(),r=document.createElement("div");r.innerHTML=o,e.replaceChild(r,t)}catch(n){console.error(`Failed to load the modals: ${n}`)}}async function R(){localStorage.getItem("currentInventory")||await j()}function x(){const e=document.getElementById("inventory-link"),t=document.getElementById("open-sign-in-modal-button"),n=document.getElementById("sign-out-button");e.style.display="block",t.style.display="none",n.style.display="block"}function V(){const e=document.getElementById("inventory-link"),t=document.getElementById("sign-out-button");localStorage.removeItem("username"),e.style.display="none",t.style.display="none",window.location.reload()}function W(){const e=document.getElementById("inventory-link");localStorage.getItem("username")?x():e.style.display="none"}export{G as A,oe as B,ie as C,te as D,_ as E,S as F,pe as G,ue as H,me as I,Z as J,ee as K,Y as L,ne as M,h as a,Q as b,ve as c,v as d,ae as e,re as f,X as g,U as h,Le as i,Ee as j,Ie as k,fe as l,he as m,se as n,$ as o,be as p,Se as q,b as r,F as s,B as t,ge as u,ye as v,le as w,de as x,O as y,ce as z};
