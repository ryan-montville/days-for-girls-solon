import{i as h,c as b,p as f,t as I,b as c,T as m,o as T,a as i,q as E,r as w,f as B,h as k,j as q,k as C,u as L,m as S}from"./app-DsQYzg7S.js";const y=document.getElementById("add-inventory-backdrop"),l=document.getElementById("add-inventory-modal"),u=document.getElementById("previous-entries-card");function p(e){const a=q(e,["entryDate","componentType","quantity","whoDonated"],"entryId",5,"shortDate"),d=a.querySelector("button");return d&&d.addEventListener("click",()=>{const t=C(e,"Are you sure you want to delete this entry?");if(t){const r=t.children[0],n=t.children[1];n&&n.addEventListener("click",()=>{L(e.entryId),c("delete-item-backdrop"),i(`Deleted entry ${S(e.entryDate.toString(),"shortDate")}: ${e.quantity} ${e.componentType} from ${e.whoDonated}`,"main-message","delete"),a.remove()}),r&&r.addEventListener("click",()=>{c("delete-item-backdrop")})}}),a}function g(){const e=w(),o=u.querySelector("p");o&&o.remove();const s=document.getElementById("previous-entries-table");s&&s.remove();const a=B();if(e.length===0){let d=document.createElement("p"),t=document.createTextNode("No previous entries");d.appendChild(t),a.remove(),u.appendChild(d)}else{const t=k("previous-entries-table",["Date","Component","Quantity","Destination","Delete"]);let r=e.reduceRight((n,D)=>{const v=p(D);return n.appendChild(v),n},document.createElement("tbody"));r.setAttribute("id","donatedTableBody"),t.appendChild(r),a.remove(),u.appendChild(t)}}function M(){const e=new FormData(l);let o={entryId:0,entryDate:m.fromDate(new Date(0)),componentType:"",quantity:0,whoDonated:""};o.entryId=T();const s=e.get("date");if(s===null||s===""){i("Please enter the date the components were donated","donate-modal-message","error");return}else{const n=new Date(s.toString());o.entryDate=m.fromDate(n)}const a=e.get("componentType");if(a===null||a.toString().trim()===""){i("Please select what component you are donating","donate-modal-message","error");return}else o.componentType=a.toString();const d=e.get("quantity");if(d===null){i("Please enter the quantity of the components being donated","donate-modal-message","error");return}else{const n=+d;if(n<1){i("Please enter a quantity greater that 0","donate-modal-message","error");return}else o.quantity=n}const t=e.get("whoDonated");if(t===null||t.toString().trim()===""){i("Please enter who donated the components","donate-modal-message","error");return}else o.whoDonated=t.toString();E(o),c("add-inventory-backdrop"),l.reset(),i("The inventory has successfully been updated","main-message","check_circle");const r=document.getElementById("donatedTableBody");if(r){const n=p(o);r.prepend(n)}else g()}h("Inventory");l.addEventListener("submit",e=>{e.preventDefault(),b(),M()});const P=document.getElementById("add-inventory-button");P.addEventListener("click",()=>{f("componentType"),y.style.display="flex",l.setAttribute("aria-modal","true"),document.getElementById("date").focus(),I(l,y)});const R=document.getElementById("cancel");R.addEventListener("click",()=>{c("add-inventory-backdrop")});g();
