import{i as h,c as D,p as b,t as f,d as c,w as E,a as s,x as I,y as w,j as B,k as T,l as k,m as q,z as C,o as L}from"./app-CMDSSXF7.js";const m=document.getElementById("add-inventory-backdrop"),i=document.getElementById("add-inventory-modal"),u=document.getElementById("previous-entries-card");function p(e){const t=k(e,5,"donatedEntry","shortDate"),a=t.querySelector("button");return a&&a.addEventListener("click",()=>{const o=q(e,"Are you sure you want to delete this entry?");if(o){const d=o.children[0],n=o.children[1];n&&n.addEventListener("click",()=>{C(e.entryId),c("delete-item-backdrop"),s(`Deleted entry ${L(e.entryDate.toString(),"shortDate")}: ${e.quantity} ${e.componentType} from ${e.whoDonated}`,"main-message","delete"),t.remove()}),d&&d.addEventListener("click",()=>{c("delete-item-backdrop")})}}),t}function y(){const e=w(),t=u.querySelector("p");t&&t.remove();const a=document.getElementById("previous-entries-table");a&&a.remove();const o=B();if(e.length===0){let d=document.createElement("p"),n=document.createTextNode("No previous entries");d.appendChild(n),o.remove(),u.appendChild(d)}else{const n=T("previous-entries-table",["Date","Component","Quantity","Destination","Delete"]);let l=e.reduceRight((r,g)=>{const v=p(g);return r.appendChild(v),r},document.createElement("tbody"));l.setAttribute("id","donatedTableBody"),n.appendChild(l),o.remove(),u.appendChild(n)}}function S(){const e=new FormData(i);let t={entryId:0,entryDate:new Date,componentType:"",quantity:0,whoDonated:""};t.entryId=E();const a=e.get("date");if(a===null||a===""){s("Please enter the date the components were donated","donate-modal-message","error");return}else t.entryDate=new Date(a.toString());const o=e.get("componentType");if(o===null||o.toString().trim()===""){s("Please select what component you are donating","donate-modal-message","error");return}else t.componentType=o.toString();const d=e.get("quantity");if(d===null){s("Please enter the quantity of the components being donated","donate-modal-message","error");return}else{const r=+d;if(r<1){s("Please enter a quantity greater that 0","donate-modal-message","error");return}else t.quantity=r}const n=e.get("whoDonated");if(n===null||n.toString().trim()===""){s("Please enter who donated the components","donate-modal-message","error");return}else t.whoDonated=n.toString();I(t),c("add-inventory-backdrop"),i.reset(),s("The inventory has successfully been updated","main-message","check_circle");const l=document.getElementById("donatedTableBody");if(l){const r=p(t);l.prepend(r)}else y()}h("Inventory");i.addEventListener("submit",e=>{e.preventDefault(),D(),S()});const M=document.getElementById("add-inventory-button");M.addEventListener("click",()=>{b("componentType"),m.style.display="flex",i.setAttribute("aria-modal","true"),document.getElementById("date").focus(),f(i,m)});const P=document.getElementById("cancel");P.addEventListener("click",()=>{c("add-inventory-backdrop")});y();
