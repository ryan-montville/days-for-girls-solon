import{i as y,s as d,v as C,b as o,n as S,a as E,w}from"./app-CGjnPcVu.js";const m=document.getElementById("sign-up-form"),T=new URLSearchParams(window.location.search),p=T.get("id"),u=p||"";let i=null;async function N(){if(u===""){d("Error loading event. Please try again.","main-message","error"),window.location.href="events.html";return}try{i=await C(u)}catch(e){d(e,"main-message","error"),window.location.href="events.html";return}if(i===null){o("Could not find event","main-message","error"),m.remove();let e=document.createElement("section");e.setAttribute("class","card");let t=document.createElement("h2"),a=document.createTextNode("Could not find event");t.appendChild(a),e.appendChild(t);let n=document.createElement("p"),l=document.createTextNode("The event you were looking for does not exist or the url is incorrect. Please go back to the events page and try again.");n.appendChild(l),e.appendChild(n);let r=document.querySelector("main");r&&r.appendChild(e)}else{const e=document.getElementById("sign-up-header"),t=document.createElement("h2"),a=document.createTextNode(`Sign up for ${i.eventTitle}`);t.appendChild(a),e.appendChild(t);const n=document.createElement("h3"),l=document.createTextNode(`${S(i.eventDate,"longDate")} ${i.eventTime}`);n.appendChild(l),e.appendChild(n);const r=document.createElement("h3"),s=document.createTextNode(i.eventLocation);r.appendChild(s),e.appendChild(r);const g=document.getElementById("loading");g&&g.remove(),E.onAuthStateChanged(c=>{if(c){const f=document.getElementById("fullName");f.value=c.displayName;const v=document.getElementById("email");v.value=c.email}}),m.classList.remove("hide")}async function h(){o("Submitting entry data...","main-message","info");const e=new FormData(m);let t={entryId:"",eventId:u,fullName:"",email:""};const a=e.get("fullName");if(a===null||a.toString().trim()===""){o("Please enter your name","main-message","error");return}else if(a.toString().split(" ").length<2){o("Please enter your first and last name","main-message","error");return}else t.fullName=a.toString();const n=e.get("email");if(n===null||n.toString().trim()===""){o("Please enter your email","main-message","error");return}if(n.toString().split("@").length<2){o("Please enter a valid email","main-message","error");return}else t.email=n.toString();const r=e.get("comments");r&&(t.comments=r.toString());try{await w(t),d(`You have sucessfully signed up for the event '${i.eventTitle}'`,"main-message","check_circle"),window.location.href="events.html"}catch(s){o(s,"main-message","error")}}m.addEventListener("submit",e=>{e.preventDefault(),h()})}y("Upcoming Events").then(()=>{N()});
