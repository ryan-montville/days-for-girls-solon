import{i as b,b as h,p as f,t as E,f as c,T as m,y as I,e as s,z as B,A as T,l as w,m as k,n as q,o as C,B as L,r as S}from"./app-BOYs2vfY.js";const p=document.getElementById("add-inventory-backdrop"),i=document.getElementById("add-inventory-modal"),u=document.getElementById("previous-entries-card");function y(e){const t=q(e,5,"donatedEntry","shortDate"),a=t.querySelector("button");return a&&a.addEventListener("click",()=>{const o=C(e,"Are you sure you want to delete this entry?");if(o){const d=o.children[0],n=o.children[1];n&&n.addEventListener("click",()=>{L(e.entryId),c("delete-item-backdrop"),s(`Deleted entry ${S(e.entryDate.toString(),"shortDate")}: ${e.quantity} ${e.componentType} from ${e.whoDonated}`,"main-message","delete"),t.remove()}),d&&d.addEventListener("click",()=>{c("delete-item-backdrop")})}}),t}function g(){const e=T(),t=u.querySelector("p");t&&t.remove();const a=document.getElementById("previous-entries-table");a&&a.remove();const o=w();if(e.length===0){let d=document.createElement("p"),n=document.createTextNode("No previous entries");d.appendChild(n),o.remove(),u.appendChild(d)}else{const n=k("previous-entries-table",["Date","Component","Quantity","Destination","Delete"]);let l=e.reduceRight((r,v)=>{const D=y(v);return r.appendChild(D),r},document.createElement("tbody"));l.setAttribute("id","donatedTableBody"),n.appendChild(l),o.remove(),u.appendChild(n)}}function M(){const e=new FormData(i);let t={entryId:0,entryDate:m.fromDate(new Date(0)),componentType:"",quantity:0,whoDonated:""};t.entryId=I();const a=e.get("date");if(a===null||a===""){s("Please enter the date the components were donated","donate-modal-message","error");return}else{const r=new Date(a.toString());t.entryDate=m.fromDate(r)}const o=e.get("componentType");if(o===null||o.toString().trim()===""){s("Please select what component you are donating","donate-modal-message","error");return}else t.componentType=o.toString();const d=e.get("quantity");if(d===null){s("Please enter the quantity of the components being donated","donate-modal-message","error");return}else{const r=+d;if(r<1){s("Please enter a quantity greater that 0","donate-modal-message","error");return}else t.quantity=r}const n=e.get("whoDonated");if(n===null||n.toString().trim()===""){s("Please enter who donated the components","donate-modal-message","error");return}else t.whoDonated=n.toString();B(t),c("add-inventory-backdrop"),i.reset(),s("The inventory has successfully been updated","main-message","check_circle");const l=document.getElementById("donatedTableBody");if(l){const r=y(t);l.prepend(r)}else g()}b("Inventory");i.addEventListener("submit",e=>{e.preventDefault(),h(),M()});const P=document.getElementById("add-inventory-button");P.addEventListener("click",()=>{f("componentType"),p.style.display="flex",i.setAttribute("aria-modal","true"),document.getElementById("date").focus(),E(i,p)});const R=document.getElementById("cancel");R.addEventListener("click",()=>{c("add-inventory-backdrop")});g();
