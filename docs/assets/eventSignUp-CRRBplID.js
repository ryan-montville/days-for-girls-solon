import{i as g,A as p,a as s,c as h,o as f,B as v,D as C,s as E}from"./app-oxGERmum.js";const l=document.getElementById("sign-up-form"),S=new URLSearchParams(window.location.search),m=S.get("id"),c=m?parseInt(m):0,T=c===0||isNaN(c);g("Upcoming Events");const i=p(c);(T||i===null)&&s("Could not find event","main-message","error");function y(e){const t=document.getElementById("sign-up-header"),n=document.createElement("h2"),a=document.createTextNode(`Sign up for ${e.eventTitle}`);n.appendChild(a),t.appendChild(n);const o=document.createElement("h3"),r=document.createTextNode(`${f(e.eventDate.toString(),"longDate")} ${e.eventTime}`);o.appendChild(r),t.appendChild(o);const d=document.createElement("h3"),u=document.createTextNode(e.eventLocation);d.appendChild(u),t.appendChild(d)}function N(){const e=new FormData(l);let t={entryId:0,eventId:c,fullName:"",email:""};t.entryId=v();const n=e.get("fullName");if(n===null||n.toString().trim()===""){s("Please enter your name","main-message","error");return}else if(n.toString().split(" ").length<2){s("Please enter your first and last name","main-message","error");return}else t.fullName=n.toString();const a=e.get("email");if(a===null||a.toString().trim()===""){s("Please enter your email","main-message","error");return}else t.email=a.toString();const o=e.get("comments");o&&(t.comments=o.toString()),C(t),i&&E(`You have sucessfully signed up for the event '${i.eventTitle}'`,"main-message","check_circle"),window.location.href="events.html"}if(i)y(i);else{s("Could not find event","main-message","error"),l.remove();const e=document.createElement("section");e.setAttribute("class","card");const t=document.createElement("h2"),n=document.createTextNode("Could not find event");t.appendChild(n),e.appendChild(t);const a=document.createElement("p"),o=document.createTextNode("The event you were looking for does not exist or the url is incorrect. Please go back to the events page and try again.");a.appendChild(o),e.appendChild(a);const r=document.querySelector("main");r&&r.appendChild(e)}l.addEventListener("submit",e=>{e.preventDefault(),h(),N()});
