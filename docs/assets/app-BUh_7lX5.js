(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function l(e,n){const t=JSON.stringify(n);localStorage.setItem(e,t)}function i(e){const n=localStorage.getItem(e);return JSON.parse(n)}function V(){return i("events").sort((n,t)=>{const o=new Date(n.eventDate).getTime(),r=new Date(t.eventDate).getTime();return o-r})}function W(e){const t=i("events").find(o=>o.eventId===e);return t||null}function _(e){let n=i("events");n.push(e),l("events",n)}function G(e){let n=i("events"),t=n.findIndex(o=>o.eventId===e.eventId);n[t]=e,l("events",n)}function B(e,n){let t=i("events");const o=t.findIndex(r=>r.eventId===e);n==="delete"?t[o].numberAttending-=1:t[o].numberAttending+=1,l("events",t)}function Q(e){const t=i("SignUpEntries").filter(s=>s.eventId!==e);l("SignUpEntries",t);const r=i("events").filter(s=>s.eventId!==e);l("events",r)}function Y(){let e=i("events");return e.length===0?1:e[e.length-1].eventId+1}function Z(e){return i("SignUpEntries").filter(t=>t.eventId===e)}function N(e){const t=i("SignUpEntries").find(o=>o.entryId===e);return t||null}function X(e){let n=i("SignUpEntries");n.push(e),l("SignUpEntries",n),B(e.eventId,"newSignUp")}function ee(e){let t=i("SignUpEntries").filter(r=>r.entryId!==e);const o=N(e);o&&B(o.eventId,"delete"),l("SignUpEntries",t)}function te(){const e=i("SignUpEntries");return e.length===0?1:e[e.length-1].entryId+1}function U(){return i("distributedInventory")}function M(e){const t=i("distributedInventory").find(o=>o.entryId===e);return t||null}function ne(e){let n=i("distributedInventory");n.push(e),l("distributedInventory",n),L(e.componentType,"subtract",e.quantity)}function oe(e){const t=i("distributedInventory").filter(r=>r.entryId!==e),o=M(e);o&&L(o.componentType,"add",o.quantity),l("distributedInventory",t)}function re(){const e=i("distributedInventory");return e.length===0?1:e[e.length-1].entryId+1}function se(e,n){S();const t=C({componentType:e});return t?t.quantity<n?{hasEnough:!1,quantity:t.quantity}:{hasEnough:!0,quantity:t.quantity}:{hasEnough:!1,quantity:0}}function O(){return i("donatedInventory")}function F(e){const t=i("donatedInventory").find(o=>o.entryId===e);return t||null}function ae(e){let n=i("donatedInventory");n.push(e),l("donatedInventory",n),L(e.componentType,"add",e.quantity)}function ie(e){const t=i("donatedInventory").filter(r=>r.entryId!==e),o=F(e);o&&L(o.componentType,"subtract",o.quantity),l("donatedInventory",t)}function de(){const e=i("donatedInventory");return e.length===0?1:e[e.length-1].entryId+1}function S(){return i("currentInventory")}function ce(e){let n=i("currentInventory");n.push(e),l("currentInventory",n)}function C({componentId:e,componentType:n}){const t=i("currentInventory");if(e){let o=t.find(r=>r.componentId===e);if(o)return o}else{let o=t.find(r=>r.componentType===n);if(o)return o}return null}function le(e){const n=C({componentId:e});if(n){let t=U(),o=O(),r=S();const s=t.filter(a=>a.componentType!==n.componentType),d=o.filter(a=>a.componentType!==n.componentType),u=r.filter(a=>a.componentId!==e);l("donatedInventory",d),l("distributedInventory",s),l("currentInventory",u)}}function L(e,n,t){let o=i("currentInventory");const r=o.findIndex(s=>s.componentType===e);n==="add"?o[r].quantity+=t:o[r].quantity-=t,l("currentInventory",o)}function ue(){const e=i("currentInventory");return e.length===0?1:e[e.length-1].componentId+1}function me(){const e=localStorage.getItem("donatePage");return JSON.parse(e)}function pe(e){l("donatePage",e)}function b(e,n,t,o,r){const s=document.createElement("button");if(s.setAttribute("type",n),s.setAttribute("id",t),s.setAttribute("class",o),r){const u=document.createElement("span");u.setAttribute("class","material-symbols-outlined");const a=document.createTextNode(r);u.appendChild(a),s.appendChild(u)}const d=document.createTextNode(e);return s.appendChild(d),s}function ge(e,n,t,o){const r=Object.keys(e),s=Object.values(e),d=s.length,u=r.filter(c=>c.includes("Id")).length;let a=document.createElement("tr");if(d===0){const c=document.createElement("td");c.setAttribute("colspan",n.toString());const m=document.createTextNode("No items to display");c.appendChild(m),a.appendChild(c)}else{for(let p=u;p<d;p++){const y=document.createElement("td");if(r[p]==="entryDate"){if(o){const g=P(s[p],o),f=document.createTextNode(g);y.appendChild(f)}}else{const g=document.createTextNode(s[p]);y.appendChild(g)}a.appendChild(y)}const c=document.createElement("td"),m=b("","button",s[0],"delete-button-icon","delete");c.appendChild(m),a.appendChild(c)}return a}function ye(){const e=document.getElementsByClassName("message-wrapper");for(const n of e)n.innerHTML=""}function v(e){const n=document.getElementById(e),t=n.getElementsByClassName("modal");t&&t[0].setAttribute("aria-modal","false"),n.style.display="none"}function h(e,n,t){const o=document.getElementById(n);o.innerHTML="";const r=document.createElement("div");t==="check_circle"?(r.setAttribute("class","success message"),r.setAttribute("aria-live","polite"),console.log(e)):t==="error"?(r.setAttribute("class","error message"),r.setAttribute("role","alert"),console.error(e)):t==="delete"||t==="warn"?(r.setAttribute("class","warn message"),r.setAttribute("aria-live","polite"),console.warn(e)):(r.setAttribute("class","info message"),r.setAttribute("aria-live","polite"),console.log(e));const s=document.createElement("span");s.setAttribute("class","material-symbols-outlined");const d=document.createTextNode(t);s.appendChild(d),r.appendChild(s);const u=document.createTextNode(e);r.appendChild(u);const a=b("","button","closeButton","","close");a.addEventListener("click",()=>o.innerHTML=""),r.appendChild(a),o.appendChild(r)}function fe(e,n){const t=document.createElement("table");t.setAttribute("id",e);const o=document.createElement("thead");return n.forEach(r=>{const s=document.createElement("th"),d=document.createTextNode(r);s.appendChild(d),o.appendChild(s)}),t.appendChild(o),t}function ve(e,n){const t=document.getElementById("delete-item-backdrop"),o=document.getElementById("delete-item-modal");t.style.display="flex",o.setAttribute("aria-modal","true");const r=document.getElementById("delete-item-modal");r.innerHTML="";const s=document.createElement("h2"),d=document.createTextNode(n);s.appendChild(d),r.appendChild(s);const u=Object.keys(e),a=Object.values(e),c=a.length;for(let g=0;g<c;g++){const f=document.createElement("p");if(!u[g].includes("Id")&&!u[g].includes("eventDescription")){const D=u[g].replace(/([a-z])([A-Z])/g,"$1 $2"),A=document.createTextNode(`${D.toLowerCase()}: ${a[g]}`);f.appendChild(A),r.appendChild(f)}}const m=document.createElement("section");m.setAttribute("class","button-row");const p=b("No","button","no","secondary");m.appendChild(p);const y=b("Yes","button","yes","delete-button");return m.appendChild(y),r.appendChild(m),p.focus(),k(r,t),m}function P(e,n){const t=new Date(e),o=new Date(t.getTime()-t.getTimezoneOffset()*-6e4);return n==="shortDate"?o.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):o.toLocaleDateString("en-US",{month:"long",day:"2-digit",year:"numeric"})}function q(){const e=S();let n=[];return e.forEach(t=>n.push(t.componentType)),n}function Ie(){const e=document.createElement("div"),n=document.createElement("p"),t=document.createTextNode("Loading...");return n.appendChild(t),e.appendChild(n),e}function he(e){let n=document.getElementById(e);n.options.length===1&&q().forEach(o=>{let r=document.createElement("option");r.setAttribute("value",o);let s=document.createTextNode(o);r.appendChild(s),n.appendChild(r)})}function k(e,n){const t=e.querySelectorAll("button, [href], input, select, textarea");if(n.style.display==="none")return;if(!t.length){console.warn("trapFocus Function called on modal with no focusable elements");return}const o=t[0],r=t[t.length-1];document.addEventListener("keydown",s=>{s.key==="Tab"&&(s.shiftKey?document.activeElement===o&&(r.focus(),s.preventDefault()):document.activeElement===r&&(o.focus(),s.preventDefault()))})}function I(e,n){const t=JSON.stringify(n);localStorage.setItem(e,t)}const x=document.getElementById("page-wrapper");let E=document.getElementById("mobile-nav-toggle");const T="https://raw.githubusercontent.com/ryan-montville/days-for-girls-solon/refs/heads/main/";async function Ee(e,n){await new Promise(a=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>a(),{once:!0}):a()}),await H(e),await j(),await K();const t=document.querySelector("nav"),o=document.getElementById("open-sign-in-modal-button"),r=document.getElementById("sign-out-button"),s=document.getElementById("sign-in-backdrop"),d=document.getElementById("sign-in-modal"),u=document.getElementById("close-modal-button");R(),J(),E.addEventListener("click",()=>{console.log("toggling nav menu"),t.classList.toggle("open"),t.classList.contains("open")?E.innerText="close":E.innerText="menu"}),o.addEventListener("click",a=>{a.preventDefault(),t.classList.contains("open")&&(E.innerText="menu",t.classList.remove("open")),s.style.display="flex",d.classList.add("opening"),d.setAttribute("aria-modal","true");const c=document.getElementById("username");c&&c.focus(),k(d,s)}),d.addEventListener("submit",a=>{a.preventDefault();const c=new FormData(d),m=c.get("username"),p=c.get("password");if(m===null||m?.toString().trim()===""){h("Username must not be empty","sign-in-message","error");return}(p===null||p.toString().trim()==="")&&h("PAssword must not be empty","sign-in-message","error"),localStorage.setItem("username",m?.toString()),s.style.display="none",h("Sign In Successful","main-message","check_circle"),w()}),r.addEventListener("click",()=>{z()}),u.addEventListener("click",a=>{a.preventDefault(),v("sign-in-backdrop")}),document.addEventListener("keydown",a=>{let c=document.getElementById("delete-item-backdrop"),m=document.getElementById("sign-in-backdrop"),p=document.getElementById("edit-event-backdrop"),y=document.getElementById("add-inventory-backdrop"),g=document.getElementById("distribute-inventory-backdrop"),f=document.getElementById("manage-inventory-backdrop");a.key==="Escape"&&(a.preventDefault(),c&&c.style.display==="flex"?v("delete-item-backdrop"):m&&m.style.display==="flex"?v("sign-in-backdrop"):p&&p.style.display==="flex"?v("edit-event-backdrop"):y&&y.style.display==="flex"?v("add-inventory-backdrop"):g&&g.style.display==="flex"?v("distribute-inventory-backdrop"):f&&f.style.display==="flex"?v("manage-inventory-backdrop"):console.log("No modals are open"))})}function be(){return!!localStorage.getItem("username")}function $(){fetch("src/inventory.json").then(e=>e.json()).then(e=>{I("currentInventory",e.currentInventory),I("donatedInventory",e.donatedInventory),I("distributedInventory",e.distributedInventory)}).catch(e=>{h("Error loading inventory data. Please try reloading the page","main-message","error"),console.error(`Error loading inventory data: ${e}`)}),fetch("src/events.json").then(e=>e.json()).then(e=>{I("events",e.upcomingEvents),I("SignUpEntries",e.SignUpEntries)}).catch(e=>{h("Error loading events data. Please try reloading the page","main-message","error"),console.error(`Error loading events data: ${e}`)})}async function H(e,n){const t=document.getElementById("header-placeholder");try{const o=await fetch(T+"header.html");if(!o.ok)throw console.error(`${o.status}: ${o.statusText}`),new Error("Error fetching header");const r=await o.text();let s=document.createElement("header");s.innerHTML=r,x.replaceChild(s,t),document.querySelector("nav").querySelectorAll("a").forEach(a=>{a.textContent===e&&a.setAttribute("aria-current","page")})}catch(o){console.error(`Failed to load the header: ${o}`)}}async function j(){const e=document.getElementById("footer-placeholder");try{const n=await fetch(T+"footer.html");if(!n.ok)throw console.error(`${n.status}: ${n.statusText}`),new Error("Error fetching footer");const t=await n.text(),o=document.createElement("footer");o.innerHTML=t,x.replaceChild(o,e)}catch(n){console.error(`Failed to load the footer: ${n}`)}}async function K(){const e=document.querySelector("body"),n=document.getElementById("modal-placeholder");try{const t=await fetch(T+"modal.html");if(!t.ok)throw console.error(`${t.status}: ${t.statusText}`),new Error("Error fetching modals");const o=await t.text(),r=document.createElement("div");r.innerHTML=o,e.replaceChild(r,n)}catch(t){console.error(`Failed to load the modals: ${t}`)}}function R(){localStorage.getItem("currentInventory")||$()}function w(){const e=document.getElementById("inventory-link"),n=document.getElementById("open-sign-in-modal-button"),t=document.getElementById("sign-out-button");e.style.display="block",n.style.display="none",t.style.display="block",console.log("Found username in local storage. Sign in successful")}function z(){const e=document.getElementById("inventory-link"),n=document.getElementById("open-sign-in-modal-button"),t=document.getElementById("sign-out-button");console.log("Removing username from local storage"),localStorage.removeItem("username"),e.style.display="none",t.style.display="none",n.style.display="block"}function J(){const e=document.getElementById("inventory-link");localStorage.getItem("username")?w():e.style.display="none"}export{te as A,X as B,se as C,V as D,S as E,ue as F,ce as G,le as H,Q as I,Z as J,G as K,ee as L,h as a,_ as b,ye as c,v as d,re as e,ne as f,Y as g,U as h,Ee as i,Ie as j,fe as k,ge as l,ve as m,oe as n,P as o,he as p,be as q,b as r,me as s,k as t,pe as u,de as v,ae as w,O as x,ie as y,W as z};
