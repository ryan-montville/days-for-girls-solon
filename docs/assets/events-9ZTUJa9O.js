import{i as b,e as f,a as A,h as T,f as p}from"./app-CWWncusU.js";import{f as u}from"./indexedService-CyxUA599.js";import{n as v}from"./navigate-CzB6ZO3P.js";let h=document.getElementById("maincontent");function y(t,a){let e=document.createElement("article");e.setAttribute("id",t.eventId.toString()),e.setAttribute("class","card");let n=document.createElement("h3"),d=document.createTextNode(t.eventTitle);n.appendChild(d),e.appendChild(n);let o=document.createElement("h4"),c=document.createTextNode(`${T(t.eventDate,"longDate")} ${t.eventTime}`);o.appendChild(c),e.appendChild(o);let s=document.createElement("h4"),E=document.createTextNode(t.eventLocation);s.appendChild(E),e.appendChild(s);let l=document.createElement("h4"),g=document.createTextNode(`Number Attending: ${t.numberAttending}`);l.appendChild(g),e.appendChild(l);let m=document.createElement("p"),C=document.createTextNode(t.eventDescription);m.appendChild(C),e.appendChild(m);let r=document.createElement("section");if(r.setAttribute("class","button-row left"),a){const i=p("Manage Event","button","manage-event","secondary");i.addEventListener("click",()=>v("/manage-event",{params:{id:t.eventId}})),r.appendChild(i)}else{const i=p("Sign Up","button","sign-up-button","secondary");i.addEventListener("click",()=>v("/event-sign-up",{params:{id:t.eventId}})),r.appendChild(i)}return e.appendChild(r),e}async function N(t){let a=[];try{t?a=await u(!1):a=await u(!0)}catch(e){A(e,"main-message","error");return}if(a.length===0){const e=document.createElement("section");e.setAttribute("id","no-events-card"),e.setAttribute("class","card");const n=document.createElement("p"),d=document.createTextNode("There are currently no upcoming events. Please check back later.");n.appendChild(d),e.appendChild(n);const o=document.getElementById("loading");o&&o.remove(),h.appendChild(e)}else{const e=a.reduce((d,o)=>{const c=y(o,t);return d.appendChild(c),d},document.createElement("section"));e.setAttribute("id","events-list");const n=document.getElementById("loading");n&&n.remove(),h.appendChild(e)}}async function I(t){const a=document.getElementById("events-header"),e=document.getElementById("events-list");if(e&&e.remove(),t){const n=document.createElement("a");n.setAttribute("href","create-new-event.html"),n.setAttribute("class","secondary");const d=document.createElement("span");d.setAttribute("class","material-symbols-outlined");const o=document.createTextNode("calendar_add_on");d.appendChild(o),n.appendChild(d);const c=document.createTextNode("Create New Event");n.appendChild(c),a.appendChild(n)}else{const n=a.querySelector("a");n&&n.remove()}}b("Upcoming Events","Upcoming Events").then(()=>{const t=f();I(t),N(t)});
