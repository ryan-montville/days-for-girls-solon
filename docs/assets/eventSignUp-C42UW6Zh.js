import{i as h,A as f,a as i,c as v,o as C,B as E,D as S,s as T}from"./app-CMDSSXF7.js";const l=document.getElementById("sign-up-form"),y=new URLSearchParams(window.location.search),m=y.get("id"),c=m?parseInt(m):0,N=c===0||isNaN(c);h("Upcoming Events").then(()=>{const r=f(c);(N||r===null)&&i("Could not find event","main-message","error");function u(e){const t=document.getElementById("sign-up-header"),n=document.createElement("h2"),a=document.createTextNode(`Sign up for ${e.eventTitle}`);n.appendChild(a),t.appendChild(n);const o=document.createElement("h3"),s=document.createTextNode(`${C(e.eventDate.toString(),"longDate")} ${e.eventTime}`);o.appendChild(s),t.appendChild(o);const d=document.createElement("h3"),p=document.createTextNode(e.eventLocation);d.appendChild(p),t.appendChild(d)}function g(){const e=new FormData(l);let t={entryId:0,eventId:c,fullName:"",email:""};t.entryId=E();const n=e.get("fullName");if(n===null||n.toString().trim()===""){i("Please enter your name","main-message","error");return}else if(n.toString().split(" ").length<2){i("Please enter your first and last name","main-message","error");return}else t.fullName=n.toString();const a=e.get("email");if(a===null||a.toString().trim()===""){i("Please enter your email","main-message","error");return}else t.email=a.toString();const o=e.get("comments");o&&(t.comments=o.toString()),S(t),r&&T(`You have sucessfully signed up for the event '${r.eventTitle}'`,"main-message","check_circle"),window.location.href="events.html"}if(r)u(r);else{i("Could not find event","main-message","error"),l.remove();const e=document.createElement("section");e.setAttribute("class","card");const t=document.createElement("h2"),n=document.createTextNode("Could not find event");t.appendChild(n),e.appendChild(t);const a=document.createElement("p"),o=document.createTextNode("The event you were looking for does not exist or the url is incorrect. Please go back to the events page and try again.");a.appendChild(o),e.appendChild(a);const s=document.querySelector("main");s&&s.appendChild(e)}l.addEventListener("submit",e=>{e.preventDefault(),v(),g()})});
