import{i as y,s as d,w as C,b as i,q as S,a as E,d as w,x as T}from"./app-DqBdRKCU.js";const m=document.getElementById("sign-up-form"),N=new URLSearchParams(window.location.search),p=N.get("id"),u=p||"";let o=null;async function I(){if(u===""){d("Error loading event. Please try again.","main-message","error"),window.location.href="events.html";return}try{o=await C(u)}catch(e){d(e,"main-message","error"),window.location.href="events.html";return}if(o===null){i("Could not find event","main-message","error"),m.remove();let e=document.createElement("section");e.setAttribute("class","card");let t=document.createElement("h2"),a=document.createTextNode("Could not find event");t.appendChild(a),e.appendChild(t);let n=document.createElement("p"),l=document.createTextNode("The event you were looking for does not exist or the url is incorrect. Please go back to the events page and try again.");n.appendChild(l),e.appendChild(n);let r=document.querySelector("main");r&&r.appendChild(e)}else{const e=document.getElementById("sign-up-header"),t=document.createElement("h2"),a=document.createTextNode(`Sign up for ${o.eventTitle}`);t.appendChild(a),e.appendChild(t);const n=document.createElement("h3"),l=document.createTextNode(`${S(o.eventDate,"longDate")} ${o.eventTime}`);n.appendChild(l),e.appendChild(n);const r=document.createElement("h3"),s=document.createTextNode(o.eventLocation);r.appendChild(s),e.appendChild(r);const g=document.getElementById("loading");g&&g.remove(),E.onAuthStateChanged(c=>{if(c){const f=document.getElementById("fullName");f.value=c.displayName;const v=document.getElementById("email");v.value=c.email}}),m.classList.remove("hide")}async function h(){i("Submitting entry data...","main-message","info");const e=new FormData(m);let t={entryId:"",eventId:u,fullName:"",email:""};const a=e.get("fullName");if(a===null||a.toString().trim()===""){i("Please enter your name","main-message","error");return}else if(a.toString().split(" ").length<2){i("Please enter your first and last name","main-message","error");return}else t.fullName=w(a.toString());const n=e.get("email");if(n===null||n.toString().trim()===""){i("Please enter your email","main-message","error");return}if(n.toString().split("@").length<2){i("Please enter a valid email","main-message","error");return}else t.email=n.toString();const r=e.get("comments");r&&(t.comments=r.toString());try{await T(t),d(`You have sucessfully signed up for the event '${o.eventTitle}'`,"main-message","check_circle"),window.location.href="events.html"}catch(s){i(s,"main-message","error")}}m.addEventListener("submit",e=>{e.preventDefault(),h()})}y("Upcoming Events","Event Sign Up").then(()=>{I()});
