import{a as r,A as g,i as p,c as f,o as h,B as v,D as C,s as S}from"./app-DZzLD5eE.js";const c=document.getElementById("sign-up-form"),E=window.location.search,T=new URLSearchParams(E),m=T.get("id");let l=0;if(m){const e=parseInt(m,10);isNaN(e)?r("Could not find event","main-message","error"):l=e}else r("Could not find event","main-message","error");const i=g(l);function y(e){const t=document.getElementById("sign-up-header"),n=document.createElement("h2"),a=document.createTextNode(`Sign up for ${e.eventTitle}`);n.appendChild(a),t.appendChild(n);const o=document.createElement("h3"),s=document.createTextNode(`${h(e.eventDate.toString(),"longDate")} ${e.eventTime}`);o.appendChild(s),t.appendChild(o);const d=document.createElement("h3"),u=document.createTextNode(e.eventLocation);d.appendChild(u),t.appendChild(d)}function N(){const e=new FormData(c);let t={entryId:0,eventId:l,fullName:"",email:""};t.entryId=v();const n=e.get("fullName");if(n===null||n.toString().trim()===""){r("Please enter your name","main-message","error");return}else if(n.toString().split(" ").length<2){r("Please enter your first and last name","main-message","error");return}else t.fullName=n.toString();const a=e.get("email");if(a===null||a.toString().trim()===""){r("Please enter your email","main-message","error");return}else t.email=a.toString();const o=e.get("comments");o&&(t.comments=o.toString()),C(t),i&&S(`You have sucessfully signed up for the event '${i.eventTitle}'`,"main-message","check_circle"),window.location.href="events.html"}if(i)y(i);else{r("Could not find event","main-message","error"),c.remove();const e=document.createElement("section");e.setAttribute("class","card");const t=document.createElement("h2"),n=document.createTextNode("Could not find event");t.appendChild(n),e.appendChild(t);const a=document.createElement("p"),o=document.createTextNode("The event you were looking for does not exist or the url is incorrect. Please go back to the events page and try again.");a.appendChild(o),e.appendChild(a);const s=document.querySelector("main");s&&s.appendChild(e)}p("Upcoming Events");c.addEventListener("submit",e=>{e.preventDefault(),f(),N()});
